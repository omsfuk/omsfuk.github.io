--------------
title: 单例模式
tags: 设计模式
--------------

# 单例模式
## 定义
```
Ensure a class has only one instance,and provide a global point of assess ot it.
确保某一个类只有一个实例，而且自动实例化并向整个系统提供这个实例
```

## 优缺点
#### 优点
* 减少内存开支
* 减少系统的性能开销
* 避免对资源的多重占用。例如写文件，避免了对同一个资源文件的同时写操作。
* 可以在系统设置全局的访问点，优化和共享资源访问。

#### 缺点
* 单例模式一般没有接口，拓展很困难。接口对单例模式是没有任何意义的，它要求“自动实例化“，并且提供单一实例，接口或抽象类是不可能被实例化的，在特殊情况下，单例模式是可以实现接口的，需要在系统开发中根据情况判断。
* 对测试不利。在并行开发环境中，如果单例模式没有完成，是不能进行测试的，没有接口也不能使用mock的方法虚拟一个对象。
* 与单一职责原则有冲突。一个类应该只实现一个逻辑，而不关心它是否是单例的，是不是要取决于环境，单例模式吧“要单例”和业务逻辑融合在一个类中。

## 使用场景
* 要求生成唯一序列号的环境
* 在整个项目中需要一个共享访问点或共享数据
* 创建一个对象需要消耗的资源过多
* 需要定义大量的静态常量和静态方法（如工具类）的环境。

## 注意事项
注意线程安全问题。懒汉模式和饿汉模式。
建议采用饿汉模式，即将静态初始化，而不是当访问的时候再去实例化。

## 拓展
有上限的多例模式
