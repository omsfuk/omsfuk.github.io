<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-wps" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/22/wps/" class="article-date">
  <time datetime="2017-04-22T03:11:17.317Z" itemprop="datePublished">2017-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="wps"><a href="#wps" class="headerlink" title="wps"></a>wps</h2><p>启动WPS for Linux后，出现提示”系统缺失字体” 。</p>
<p>出现提示的原因是因为WPS for Linux没有自带windows的字体，只要在Linux系统中加载字体即可。</p>
<p>具体操作步骤如下：</p>
<ol>
<li>下载缺失的字体文件，然后复制到Linux系统中的/usr/share/fonts文件夹中。</li>
</ol>
<p>国外下载地址：<code>https://www.dropbox.com/s/lfy4hvq95ilwyw5/wps_symbol_fonts.zip</code></p>
<p>国内下载地址：’<a href="http://pan.baidu.com/s/1mh0lcbY`" target="_blank" rel="external">http://pan.baidu.com/s/1mh0lcbY`</a></p>
<p>下载完成后，解压并进入目录中，继续执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo cp *.ttf *.TTF /usr/share/fonts</div></pre></td></tr></table></figure></p>
<ol>
<li><p>执行以下命令,生成字体的索引信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo mkfontscale</div><div class="line">sudo mkfontdir</div></pre></td></tr></table></figure>
</li>
<li><p>运行fc-cache命令更新字体缓存。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo fc-cache</div></pre></td></tr></table></figure>
</li>
<li><p>重启wps即可，字体缺失的提示不再出现。<br>（生成的文件可以删除，貌似。。）</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/22/wps/" data-id="cj1soul450005fcuiz58f3rym" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-bcloud" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/22/bcloud/" class="article-date">
  <time datetime="2017-04-22T01:12:19.192Z" itemprop="datePublished">2017-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ubuntu-下安装bcloud"><a href="#ubuntu-下安装bcloud" class="headerlink" title="ubuntu 下安装bcloud"></a>ubuntu 下安装bcloud</h2><p>直接去github下载deb包就可以了。然后安装<br>如果报错，获取bdstoken失败，参考<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://bbs.deepin.org/forum.php?mod=viewthread&amp;tid=43445</div></pre></td></tr></table></figure></p>
<p>如果主页内容无法显示，参考<br>Step1:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Step 1:</div></pre></td></tr></table></figure></p>
<p>sudo gedit /usr/lib/python3/dist-packages/bcloud/auth.py<br>在get_bdstoken函数的if req:前一行添加”cookie.load_list(req.headers.get_all(‘Set-Cookie’))”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">* Step 2:</div></pre></td></tr></table></figure></p>
<p>sudo gedit /usr/lib/python3/dist-packages/bcloud/pcs.py<br>把所有cookie.sub_output()的参数添加上’SCRC’,’STOKEN’<br>例：’Cookie’: cookie.sub_output(‘BAIDUID’, ‘BDUSS’, ‘PANWEB’, ‘cflag’, ‘SCRC’, ‘STOKEN’),<br>只需要修改4个参数的函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">* Step 3</div></pre></td></tr></table></figure></p>
<p>sudo rm -rf ~/.config/bcloud/<em><br>sudo rm -rf ~/.cache/bcloud/</em><br>```</p>
<ul>
<li>Step 4<br>重新运行Bcloud</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/22/bcloud/" data-id="cj1soul3p0000fcuiwuqu9or6" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-qq" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/22/qq/" class="article-date">
  <time datetime="2017-04-22T00:36:13.730Z" itemprop="datePublished">2017-04-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ubuntu16.04 LTS环境下安装QQintl</p>
<h2 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h2><p>下载地址: <a href="http://linux.linuxidc.com/" target="_blank" rel="external">http://linux.linuxidc.com/</a></p>
<p>用户名与密码: www.linuxidc.com</p>
<p>具体下载目录在 /2016年资料/9月/6日/Ubuntu 16.04安装QQ国际版图文详细教程/</p>
<h2 id="安装依赖库"><a href="#安装依赖库" class="headerlink" title="安装依赖库"></a>安装依赖库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install libgtk2.0-0:i386</div><div class="line">sudo apt-get install lib32ncurses5</div></pre></td></tr></table></figure>
<h2 id="解压并安装wineqqintl"><a href="#解压并安装wineqqintl" class="headerlink" title="解压并安装wineqqintl"></a>解压并安装wineqqintl</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -vxf wine-qqintl-www.linuxidc.com.tar.xz</div><div class="line">sudo dpkg -i wine-qqintl_0.1.3-2_i386.deb</div><div class="line">sudo dpkg -i ttf-wqy-microhei_0.2.0-beta-2_all.deb</div><div class="line">sudo dpkg -i fonts-wqy-microhei_0.2.0-beta-2_all.deb</div></pre></td></tr></table></figure>
<h2 id="关闭手机上的设备锁，否则会提示版本过低"><a href="#关闭手机上的设备锁，否则会提示版本过低" class="headerlink" title="关闭手机上的设备锁，否则会提示版本过低"></a>关闭手机上的设备锁，否则会提示版本过低</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/22/qq/" data-id="cj1soul400003fcuiw5b5czsa" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/hexo/" class="article-date">
  <time datetime="2017-04-21T14:58:12.699Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="基本环境安装"><a href="#基本环境安装" class="headerlink" title="基本环境安装"></a>基本环境安装</h1><h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git</div><div class="line">git config --global user.name &quot;omsfuk&quot;</div><div class="line">git config --golbal user.email &quot;omsfuk@163.com&quot;</div><div class="line">生成密钥</div><div class="line">ssh-keygen -t rsa -C &quot;omsfuk@163.com&quot;</div><div class="line">将id_rsa.pub文件里的内容设置到github中</div></pre></td></tr></table></figure>
<h2 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget  http://nodejs.org/dist/v4.5.0/node-v4.5.0-linux-x64.tar.xz</div><div class="line">tar -vxf node-v4.5.0-linux-x64.tar.xz</div></pre></td></tr></table></figure>
<p>然后将文件复制过去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo cp -r bin/* /usr/local/bin/</div><div class="line">sudo cp -r lib/* /usr/local/lib/</div><div class="line">sudo cp -r include/* /usr/local/include/</div></pre></td></tr></table></figure></p>
<p>查看node版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure></p>
<h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install npm</div></pre></td></tr></table></figure>
<h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install hexo-cli -g</div></pre></td></tr></table></figure>
<h1 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">hexo init 初始化。</div><div class="line">hexo new [layout] &lt;title&gt; 创建新文章。生成的文件会在source/_post/目录下，直接编辑就好</div><div class="line">hexo clean 清理缓存，当经常更换主题或发表文章时使用</div><div class="line">hexo g 生成静态网页</div><div class="line">hexo d 部署</div><div class="line">hexo s 启动服务器</div></pre></td></tr></table></figure>
<h1 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h1><p>直接下载主题，然后放在themes目录下，在<code>_config.yml</code>中更改主题名</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/hexo/" data-id="cj1soul3x0002fcui5zcs36nh" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/ubuntu/" class="article-date">
  <time datetime="2017-04-21T14:41:30.870Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/ubuntu/">ubuntu初始化&amp;&amp;美化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="Ubuntu初始化以及美化"><a href="#Ubuntu初始化以及美化" class="headerlink" title="Ubuntu初始化以及美化"></a>Ubuntu初始化以及美化</h1><h2 id="系统版本"><a href="#系统版本" class="headerlink" title="系统版本"></a>系统版本</h2><ul>
<li>Ubuntu 16.10<br>可以安装screenfetch来查看系统信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install screenfetch</div><div class="line">screenfetch</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git</div></pre></td></tr></table></figure>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install vim</div></pre></td></tr></table></figure>
<h2 id="Chorme浏览器"><a href="#Chorme浏览器" class="headerlink" title="Chorme浏览器"></a>Chorme浏览器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 获取deb安装包</span></div><div class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</div><div class="line"><span class="comment"># 安装</span></div><div class="line">sudo dpkg -i google-chrome-stable_current_amd64.deb</div></pre></td></tr></table></figure>
<h2 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h2><p>直接去官网下载deb包，安装就好了</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install mysql-server</div></pre></td></tr></table></figure>
<h2 id="翻墙"><a href="#翻墙" class="headerlink" title="翻墙"></a>翻墙</h2><p>去laod博客下载hosts文件，然后敲<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 重启网络管理器</div><div class="line">sudo systemctl restart NetworkManager</div></pre></td></tr></table></figure></p>
<p>或者关闭网络连接再打开。<br>google访问要加<code>https</code></p>
<h2 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 安装zsh</div><div class="line">sudo apt-get install zsh</div><div class="line"># 设为默认登录shell，可以查看/etc/passwd验证是否更改</div><div class="line">chsh -s /bin/zsh</div></pre></td></tr></table></figure>
<h2 id="Oh-My-ZSH"><a href="#Oh-My-ZSH" class="headerlink" title="Oh My ZSH!"></a>Oh My ZSH!</h2><p>Oh My Zsh是一款社区驱动的命令行工具，正如它的主页上说的，Oh My Zsh 是一种生活方式。它基于zsh命令行，提供了主题配置，插件机制，已经内置的便捷操作。给我们一种全新的方式使用命令行。</p>
<p>Oh My Zsh这个名字听起来就很有意思，它是基于zsh命令行的一个扩展工具集，提供了丰富的扩展功能。</p>
<p>Oh My Zsh只是一个对zsh命令行环境的配置包装框架，但它不提供命令行窗口，更不是一个独立的APP。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</div></pre></td></tr></table></figure></p>
<p>配置主题，可以修改<code>.zshrc</code>的<code>ZSH_THEME</code>来选择主题。具体主题可以查看<code>oh my zsh</code>官网说明。感觉默认的就挺好。</p>
<p>然后在终端上右键，更改配置文件，来个透明效果</p>
<h2 id="Unity-Tweak-Tool"><a href="#Unity-Tweak-Tool" class="headerlink" title="Unity Tweak Tool"></a>Unity Tweak Tool</h2><p>网上找的ppa都失效了，直接去软件中心下载就好了。搜索<code>unity-tweak-tool</code>，一个字符也不要错。<br>下载安装。ok</p>
<h2 id="OSX-Arc"><a href="#OSX-Arc" class="headerlink" title="OSX - Arc"></a>OSX - Arc</h2><p>去Linux公社下载<code>OSX - Arc</code>主题<br>地址<code>http://linux.linuxidc.com/</code>,用户名与密码都是<code>www.linuxidc.com</code><br>具体下载目录在<code>/2017年资料/1月/1日/GTK3主题：OSX-Arc/</code><br>将提取后的文件复制到<code>/usr/share/themes</code></p>
<p>借助Unity Tweak Tool更换主题为<code>OSX - Arc - darker</code></p>
<h2 id="Numix图标"><a href="#Numix图标" class="headerlink" title="Numix图标"></a>Numix图标</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:numix/ppa</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install numix-icon-theme</div><div class="line">sudo apt-get install numix-icon-theme-circle # 圆形图标比较美观</div></pre></td></tr></table></figure>
<h2 id="更改用户文件夹"><a href="#更改用户文件夹" class="headerlink" title="更改用户文件夹"></a>更改用户文件夹</h2><p>我的安装完是中文的，感觉不爽，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">vim .config/user-dirs.dirs </div><div class="line"></div><div class="line"># 改一该就好了</div><div class="line">XDG_DESKTOP_DIR=&quot;$HOME/Desktop&quot;</div><div class="line">XDG_DOWNLOAD_DIR=&quot;$HOME/Downloads&quot;</div><div class="line">XDG_TEMPLATES_DIR=&quot;$HOME/Templates&quot;</div><div class="line">XDG_PUBLICSHARE_DIR=&quot;$HOME/Public&quot;</div><div class="line">XDG_DOCUMENTS_DIR=&quot;$HOME/Documents&quot;</div><div class="line">XDG_MUSIC_DIR=&quot;$HOME/Music&quot;</div><div class="line">XDG_PICTURES_DIR=&quot;$HOME/Pictures&quot;</div><div class="line">XDG_VIDEOS_DIR=&quot;$HOME/Videos&quot;</div></pre></td></tr></table></figure></p>
<p>然后手动将中文名改为英文的</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/ubuntu/" data-id="cj1soul4j0009fcuis4e9bvqs" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-thinkinjava" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/thinkinjava/" class="article-date">
  <time datetime="2017-04-21T14:41:30.866Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/thinkinjava/">think in java 学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="char与int的转换"><a href="#char与int的转换" class="headerlink" title="char与int的转换"></a>char与int的转换</h1><p>char a = ‘a’ + 1; yes</p>
<p>char b = ‘a’;<br>char a = b + 1; no</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/thinkinjava/" data-id="cj1soul4f0007fcui6f0pychr" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mybatis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/mybatis/" class="article-date">
  <time datetime="2017-04-21T14:41:30.866Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/mybatis/">mybatis总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><h2 id="传统的JDBC编程"><a href="#传统的JDBC编程" class="headerlink" title="传统的JDBC编程"></a>传统的JDBC编程</h2><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>JDBC是由sun公司提出的一系列规范，但是它只定义了接口规范，而具体的实现由各个数据库厂商去实现。JDBC是一种典型的桥接模式。</p>
<h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul>
<li>连接数据库，注册驱动和数据库信息</li>
<li>打开statement对象</li>
<li>通过statement执行sql，返回结果到resultset对象</li>
<li>使用resultset读取数据，然后通过代码转化为具体的POJO对象</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>工作量大，对可能产生的异常进行捕获太麻烦</p>
<h2 id="ORM模型（对象关系映射）"><a href="#ORM模型（对象关系映射）" class="headerlink" title="ORM模型（对象关系映射）"></a>ORM模型（对象关系映射）</h2><p>简单的说，ORM模型就是数据库的表和简单的Java对象的映射关系模型，它主要解决数据库数据和POJO对象的相互映射。</p>
<h4 id="Hiberinate"><a href="#Hiberinate" class="headerlink" title="Hiberinate"></a>Hiberinate</h4><h6 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h6><p>Hiberinate是建立在若干POJO通过XML映射文件（或注解）提供的规则映射到数据库表上的。换句话说，我们可以通过POJO直接操作数据库的数据。<br>它提供的是一种全表映射的模型。Hiberinate对JDBC的封装程度比较高，消除了代码的映射规则，全部被分离到了XML或注解里去配置，无需再管理数据库连接。<br>一个会话中，不需要操作多个对象，只要操作session对象即可。关闭资源只需要关闭一个session。<br>Hiberinate还提供了级联、映射、一堆多等功能。</p>
<h6 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h6><ul>
<li>全表映射带来的不便，比如更新时需要发送所有的字段</li>
<li>无法根据不同的条件组装不同的sql</li>
<li>对多表关联和复杂sql查询支持较差</li>
<li>不能有效支持存储过程</li>
<li>虽然由HQL，但是性能较差（致命问题）</li>
</ul>
<h4 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h4><p>在大型互联网中，灵活，SQL优化，减少数据的传递是最基本的优化方法，显然，Hiberinate是无法满足我们的要求的。<br>为了解决Hiberinate的不足，一个半自动的映射框架MyBatis应运而生，只所以称它为半自动，是因为它需要手工匹配提供POJO、SQL、映射关系，而全表映射Hiberinate只需要提供POJO和映射关系即可。</p>
<p>不单单要我们提供映射关系，还需要提供SQL语句，MyBatis所需要提供的映射文件包含一下三个部分：SQL、映射规则、POJO。<br>MyBatis具有自动映射功能。换句话说，在注意一些规则的基础上，MyBatis可以帮我们完成自动映射，而无需任何映射规则。大大提高了开发的效率和灵活性。</p>
<h2 id="各种技术的应用场景"><a href="#各种技术的应用场景" class="headerlink" title="各种技术的应用场景"></a>各种技术的应用场景</h2><ul>
<li>JDBC几乎不用</li>
<li>Hiberinate场景不太复杂，要求性能不太苛刻</li>
<li>大型互联项目的首选框架</li>
</ul>
<h1 id="MyBatis入门"><a href="#MyBatis入门" class="headerlink" title="MyBatis入门"></a>MyBatis入门</h1><h2 id="MyBatis核心组件"><a href="#MyBatis核心组件" class="headerlink" title="MyBatis核心组件"></a>MyBatis核心组件</h2><ul>
<li>SqlSessionFactoryBuilder</li>
<li>SqlSessionFactory</li>
<li>SqlSession既可以发送SQL并返回结果集，也可以获得mapper接口</li>
<li>SqlMapper mybatis新设计的组件，由一个Java接口和XML文件（或注解）构成的，需要给出对应的sql映射规则，负责发送sql去执行，并返回结果</li>
</ul>
<h2 id="SqlSessionFactory的构建"><a href="#SqlSessionFactory的构建" class="headerlink" title="SqlSessionFactory的构建"></a>SqlSessionFactory的构建</h2><h4 id="xml方式"><a href="#xml方式" class="headerlink" title="xml方式"></a>xml方式</h4><p>会自动生成一个单实例的Configuration，存在于整个mybatis的生命周期中，一遍重复获取和使用。<br>configuration中的environments可以配置一堆environment，通过default来制定默认用哪一个environment</p>
<h4 id="代码方式"><a href="#代码方式" class="headerlink" title="代码方式"></a>代码方式</h4><p>构建一个工厂方法，用构建的SqlSessionFactoryBuilder构建SqlSessionFactory</p>
<h2 id="创建SqlSession"><a href="#创建SqlSession" class="headerlink" title="创建SqlSession"></a>创建SqlSession</h2><p>通过openSession来获取session，用close管理<br>SqlSession主要用途</p>
<ul>
<li>获取映射器</li>
<li>直接通过命名信息去执行sql返回结果</li>
<li>支持事务，通过commit、rollback方法</li>
</ul>
<h2 id="映射器"><a href="#映射器" class="headerlink" title="映射器"></a>映射器</h2><p>映射器由Java接口和XML文件（或注解）共同组成<br>作用：定义参数类型和描述缓存，描述sql语句，定义查询结果和POJO的映射关系</p>
<h4 id="XML方式"><a href="#XML方式" class="headerlink" title="XML方式"></a>XML方式</h4><h4 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h4><p><code>@Select(value = &quot;select ...&quot;)</code><br>虽然简单，但是当语句特别复杂时，会造成可读性下降。<br>mybatis新增了mapper，单仍然保留着ibatis时代的通过命名 + sql id的方式发送sql并返回数据的形式<br>那么mapper究竟好在哪里？mapper是一个接口，相对而言它可以进一步屏蔽SqlSession，但它具有更强的业务可读性。<br>利用mapper方式，IDE可以检查Java语法，避免了不必要的错误</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h4 id="SqlSessionFactoryBuilder"><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h4><p>它的作用就是一个构建器，一旦构建了SqlSessionFactory，他的作用就已经完结，失去了存在的意义。所以他的生命周期只在于方法的局部。</p>
<h4 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h4><p>SqlSessionFactory的作用是创建SqlSession。SqlSession就是一个会话，相当于JDBC中的Connection对象。SqlSessionFactory应该在MyBatis应用的整个生命周期中，采用单例模式。</p>
<h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><p>一个会话，相当于JDBC中的一个Connection对象，它的生命周期应该是在请求数据库处理事务的过程中。它是一个线程不安全的对象，在涉及多线程时要特别当心。操作数据库需要注意其隔离级别，数据库锁等高级特性，需要及时关闭。</p>
<h4 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h4><p>Mapper的最大生命周期和SqlSession相同。</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;configuration&gt;</div><div class="line">	&lt;properties/&gt;属性</div><div class="line">	&lt;setting/&gt;设置</div><div class="line">	&lt;typeAliases/&gt;类型命名</div><div class="line">	&lt;typeHandlers/&gt;类型处理器</div><div class="line">	&lt;objectFactory/&gt;对象工厂</div><div class="line">	&lt;plugins/&gt;插件</div><div class="line">	&lt;environments&gt;配置环境</div><div class="line">		&lt;environment&gt;环境变量</div><div class="line">			&lt;transactionManager/&gt;事务管理器</div><div class="line">			&lt;dataSource/&gt;数据源</div><div class="line">		&lt;/environment&gt;</div><div class="line">	&lt;/environments&gt;</div><div class="line">	&lt;databaseIdProvider/&gt;数据库厂商标识</div><div class="line">	&lt;mappers/&gt;映射器</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<p>这就是全部mabatis的配置文件</p>
<h2 id="properties元素"><a href="#properties元素" class="headerlink" title="properties元素"></a>properties元素</h2><h4 id="property子元素"><a href="#property子元素" class="headerlink" title="property子元素"></a>property子元素</h4><p>可在配置文件中以<code>${}</code>形式调用</p>
<h4 id="properties配置文件"><a href="#properties配置文件" class="headerlink" title="properties配置文件"></a>properties配置文件</h4><p>将配置写在propeties文件中</p>
<properties resource="jdbc.properties">

<h4 id="程序参数传递"><a href="#程序参数传递" class="headerlink" title="程序参数传递"></a>程序参数传递</h4><p>有时候数据库的用户名和密码是以密文的形式保存的。这时侯要通过编码进行配置。</p>
<h4 id="不同properties优先级"><a href="#不同properties优先级" class="headerlink" title="不同properties优先级"></a>不同properties优先级</h4><p>当三种配置同时存在的时候，有可能会出现properties冲突（优先级依次升高，后边的覆盖前边的）</p>
<ul>
<li>先读property子元素</li>
<li>根据resource或url属性读取指定属性</li>
<li>读取作为方法参数传递的属性，并覆盖已读取的同名属性</li>
</ul>
<h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><p>setting是mybatis中最复杂的配置，它会改变mybatis运行时的行为，即使不配置settings，mybatis也会正常工作</p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>系统已经定义了一些别名，要想自定义别名可以通过</p>
<ul>
<li>typeAliases配置</li>
<li>扫描 + @Alias注解。不加注解也可以，默认别名是类名的首字母小写。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;typeAliases&gt;</div><div class="line">	&lt;package name=&quot;com.learn.po1&quot;/&gt;</div><div class="line">	&lt;package name=&quot;com.learn.po2&quot;/&gt;</div><div class="line">&lt;/typeAliases&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="typeHandler类型处理器"><a href="#typeHandler类型处理器" class="headerlink" title="typeHandler类型处理器"></a>typeHandler类型处理器</h2><p>typeHandler用于在Java Type和JDBC Type之间的转化。一般来说系统定义的就够用了。</p>
<h2 id="ObjectFactoty"><a href="#ObjectFactoty" class="headerlink" title="ObjectFactoty"></a>ObjectFactoty</h2><p>当mybatis在构建一个结果返回的时候，都会使用ObjectFactory（对象工厂）去构建POJO。<br>大部分情况下，使用系统默认的即可</p>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>比较负复杂，放在后边几章</p>
<h2 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h2><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p>配置环境可以注册多个数据源<br>每个数据源可以分为两大部分，一个是数据源的配置，另一个是数据库事务的配置</p>
<ul>
<li><p>transactionManager<br>它的type属性由三种配置方式</p>
<ul>
<li>JDBC</li>
<li>MANAGED 采用容器方式管理事务，在JNDI数据源中常用</li>
<li>自定义。适用于特殊应用</li>
</ul>
</li>
<li><p>dataSource<br>type属性提供对数据库连接方式的配置</p>
<ul>
<li>UNPOOLED，非数据库连接池</li>
<li>POOLED，连接池数据库</li>
<li>JNDI，JNDI数据源</li>
<li>自定义数据源</li>
</ul>
</li>
</ul>
<h4 id="数据库事务"><a href="#数据库事务" class="headerlink" title="数据库事务"></a>数据库事务</h4><p>大部分工作环境下，会使用Spring框架控制它</p>
<h4 id="数据库厂商标识"><a href="#数据库厂商标识" class="headerlink" title="数据库厂商标识"></a>数据库厂商标识</h4><p>在相同的数据库厂商的环境下，数据库厂商标识没什么意义。在实际的应用中使用的比较少，因为使用不同厂商数据库的系统还是比较少的。mybatis可能会运行在不同厂商的数据库中，它为此提供了一个数据库厂商标识，并提供自定义它的作用在于指定sql在对应的数据库厂商提供的数据库中运行</p>
<h2 id="引入映射器的方法"><a href="#引入映射器的方法" class="headerlink" title="引入映射器的方法"></a>引入映射器的方法</h2><p>首先要提供一个mapper接口和一个mapper映射，然后有4种引入方式</p>
<h4 id="用文件路径引入映射器"><a href="#用文件路径引入映射器" class="headerlink" title="用文件路径引入映射器"></a>用文件路径引入映射器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;mappers&gt;</div><div class="line">	&lt;mapper resource=&quot;...&quot;/&gt;</div><div class="line">&lt;/mappers&gt;</div></pre></td></tr></table></figure>
<h4 id="用包名引入"><a href="#用包名引入" class="headerlink" title="用包名引入"></a>用包名引入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;mappers&gt;</div><div class="line">	&lt;package name=&quot;...&quot;/&gt;</div><div class="line">&lt;/mappers&gt;</div></pre></td></tr></table></figure>
<h4 id="用类注册引入映射器"><a href="#用类注册引入映射器" class="headerlink" title="用类注册引入映射器"></a>用类注册引入映射器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;mappers&gt;</div><div class="line">	&lt;mapper class=&quot;...&quot;/&gt;</div><div class="line">&lt;/mapper&gt;</div></pre></td></tr></table></figure>
<h4 id="用userMapper-xml引入"><a href="#用userMapper-xml引入" class="headerlink" title="用userMapper.xml引入"></a>用userMapper.xml引入</h4><p><mappers><br>    <mapper url="file://...xml"><br></mapper></mappers></p>
<h1 id="映射器-1"><a href="#映射器-1" class="headerlink" title="映射器"></a>映射器</h1><h2 id="映射器的主要元素"><a href="#映射器的主要元素" class="headerlink" title="映射器的主要元素"></a>映射器的主要元素</h2><p>select、insert、update、delete、parameterMap、sql、resultMap、cache、cache-ref</p>
<h2 id="select元素"><a href="#select元素" class="headerlink" title="select元素"></a>select元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;select</div><div class="line">        &lt;!--  1. id （必须配置）</div><div class="line">        id是命名空间中的唯一标识符，可被用来代表这条语句。 </div><div class="line">        一个命名空间（namespace） 对应一个dao接口, </div><div class="line">        这个id也应该对应dao里面的某个方法（相当于方法的实现），因此id 应该与方法名一致  --&gt;</div><div class="line">     id=&quot;selectPerson&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 2. parameterType （可选配置, 默认为mybatis自动选择处理）</div><div class="line">        将要传入语句的参数的完全限定类名或别名， 如果不配置，mybatis会通过ParameterHandler 根据参数类型默认选择合适的typeHandler进行处理</div><div class="line">        parameterType 主要指定参数类型，可以是int, short, long, string等类型，也可以是复杂类型（如对象） --&gt;</div><div class="line">     parameterType=&quot;int&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 3. resultType (resultType 与 resultMap 二选一配置)</div><div class="line">         resultType用以指定返回类型，指定的类型可以是基本类型，可以是java容器，也可以是javabean --&gt;</div><div class="line">     resultType=&quot;hashmap&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 4. resultMap (resultType 与 resultMap 二选一配置)</div><div class="line">         resultMap用于引用我们通过 resultMap标签定义的映射类型，这也是mybatis组件高级复杂映射的关键 --&gt;</div><div class="line">     resultMap=&quot;personResultMap&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 5. flushCache (可选配置)</div><div class="line">         将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：false --&gt;</div><div class="line">     flushCache=&quot;false&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 6. useCache (可选配置)</div><div class="line">         将其设置为 true，将会导致本条语句的结果被二级缓存，默认值：对 select 元素为 true --&gt;</div><div class="line">     useCache=&quot;true&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 7. timeout (可选配置) </div><div class="line">         这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为 unset（依赖驱动）--&gt;</div><div class="line">     timeout=&quot;10000&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 8. fetchSize (可选配置) </div><div class="line">         这是尝试影响驱动程序每次批量返回的结果行数和这个设置值相等。默认值为 unset（依赖驱动)--&gt;</div><div class="line">     fetchSize=&quot;256&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 9. statementType (可选配置) </div><div class="line">         STATEMENT，PREPARED 或 CALLABLE 的一个。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED--&gt;</div><div class="line">     statementType=&quot;PREPARED&quot;</div><div class="line">     </div><div class="line">     &lt;!-- 10. resultSetType (可选配置) </div><div class="line">         FORWARD_ONLY，SCROLL_SENSITIVE 或 SCROLL_INSENSITIVE 中的一个，默认值为 unset （依赖驱动）--&gt;</div><div class="line">     resultSetType=&quot;FORWARD_ONLY&quot;&gt;</div></pre></td></tr></table></figure>
<h4 id="自动映射"><a href="#自动映射" class="headerlink" title="自动映射"></a>自动映射</h4><p>当数据库列名和字段名一致时，只要autoMappingBehaviour参数不设置为NONO的时候（由三个值，PARTIAL、NONE、FULL，默认为PARTIAL），mybatis会自动映射。<br>若数据库使用下划线，java使用驼峰，要想进行自动映射，</p>
<ul>
<li>方法一：列的别名</li>
<li>方法二：在配置文件中开启驼峰命名<br>设置mapUnderscoreToCamelCase为true</li>
</ul>
<h4 id="传递多个参数"><a href="#传递多个参数" class="headerlink" title="传递多个参数"></a>传递多个参数</h4><p>有三种方法</p>
<ul>
<li>参数类型为map</li>
<li>注解方式传递参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public List&lt;Role&gt; findRoleByAnnotation(@Param(&quot;roleName&quot;) String rolename, @Param(&quot;note&quot;) String note);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>在xml中无需定义参数类型</p>
<ul>
<li>使用javaBean传递参数</li>
</ul>
<p>总结</p>
<ul>
<li>map方法，果断废弃 </li>
<li>@Param方法，当参数&lt;=5，可行，更直观</li>
<li>当参数&gt;5，使用JavaBean</li>
</ul>
<h2 id="insert元素"><a href="#insert元素" class="headerlink" title="insert元素"></a>insert元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&lt;insert</div><div class="line">      &lt;!-- 1. id （必须配置）</div><div class="line">        id是命名空间中的唯一标识符，可被用来代表这条语句。 </div><div class="line">        一个命名空间（namespace） 对应一个dao接口, </div><div class="line">        这个id也应该对应dao里面的某个方法（相当于方法的实现），因此id 应该与方法名一致 --&gt;</div><div class="line">      </div><div class="line">      id=&quot;insertUser&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 2. parameterType （可选配置, 默认为mybatis自动选择处理）</div><div class="line">        将要传入语句的参数的完全限定类名或别名， 如果不配置，mybatis会通过ParameterHandler 根据参数类型默认选择合适的typeHandler进行处理</div><div class="line">        parameterType 主要指定参数类型，可以是int, short, long, string等类型，也可以是复杂类型（如对象） --&gt;</div><div class="line">      </div><div class="line">      parameterType=&quot;com.demo.User&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 3. flushCache （可选配置，默认配置为true）</div><div class="line">        将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：true（对应插入、更新和删除语句） --&gt;</div><div class="line">      </div><div class="line">      flushCache=&quot;true&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 4. statementType （可选配置，默认配置为PREPARED）</div><div class="line">        STATEMENT，PREPARED 或 CALLABLE 的一个。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。 --&gt;</div><div class="line">      </div><div class="line">      statementType=&quot;PREPARED&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 5. keyProperty (可选配置， 默认为unset)</div><div class="line">        （仅对 insert 和 update 有用）唯一标记一个属性，MyBatis 会通过 getGeneratedKeys 的返回值或者通过 insert 语句的 selectKey 子元素设置它的键值，默认：unset。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。 --&gt;</div><div class="line">      </div><div class="line">      keyProperty=&quot;&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 6. keyColumn     (可选配置)</div><div class="line">        （仅对 insert 和 update 有用）通过生成的键值设置表中的列名，这个设置仅在某些数据库（像 PostgreSQL）是必须的，当主键列不是表中的第一列的时候需要设置。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。 --&gt;</div><div class="line">      </div><div class="line">      keyColumn=&quot;&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 7. useGeneratedKeys (可选配置， 默认为false)</div><div class="line">        （仅对 insert 和 update 有用）这会令 MyBatis 使用 JDBC 的 getGeneratedKeys 方法来取出由数据库内部生成的主键（比如：像 MySQL 和 SQL Server 这样的关系数据库管理系统的自动递增字段），默认值：false。  --&gt;</div><div class="line">      </div><div class="line">      useGeneratedKeys=&quot;false&quot;</div><div class="line">      </div><div class="line">      &lt;!-- 8. timeout  (可选配置， 默认为unset, 依赖驱动)</div><div class="line">        这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为 unset（依赖驱动）。 --&gt;</div><div class="line">      timeout=&quot;20&quot;&gt;</div></pre></td></tr></table></figure>
<h4 id="主键回添和自定义"><a href="#主键回添和自定义" class="headerlink" title="主键回添和自定义"></a>主键回添和自定义</h4><p>用keyProperty属性指定哪个是主键字段，同时使用useGeneratedkeys属性去告诉mybatis这个主键是否使用数据库内置策略生成。它会自动回填JavaBean的id值</p>
<p>实际工作中往往没有这么简单，需要根据一些特殊的关系设置主键id的值。假设取消掉表的t_role的id自增规则，要求是，如果表t_role没有记录，则需要设置id=1，否则我们就取最大的id+2来设置新的主键。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;insert id=&quot;insertRole&quot; parameterType=&quot;role&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;</div><div class="line">	&lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt;</div><div class="line">		select if(max(id) is null, 1, max(id) + 2) as newId from t_role</div><div class="line">	&lt;/selectKey&gt;</div><div class="line">	insert into t_role(id, role_name, note) values(#&#123;id&#125;, #&#123;roleName&#125;, #&#123;note&#125;)</div><div class="line">&lt;/insert&gt;</div></pre></td></tr></table></figure></p>
<h1 id="mybatis-注意事项"><a href="#mybatis-注意事项" class="headerlink" title="mybatis 注意事项"></a>mybatis 注意事项</h1><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>Mybatis的事务管理器选择jdbc的话，默认是不会自动commit的。<br>但是需要非常注意的一点就是select语句是不需要commit的<br>因为我的测试过select就算不commit也能准确的得到查到的结果。<br>但是Insert等则必须commit了才能成功插入，否则不会报异常数据库也没有成功插入。<br>2016-01-12 答案：<br>在JavaBean数据库操作中，一项事务是指由一条或多条对数据库更新的sql语句所组成的一个不可分割的工作单元。只有当事务中的所有操作都正常完成了，整个事务才能被提交到数据库，如果有一项操作没有完成，就必须撤消整个事务。我们通过提交commit()或是回滚rollback（）来结束事务的操作。关于事务操作的方法都位于接口java.sql.Connection中</p>
<h2 id="mybatis返回列表"><a href="#mybatis返回列表" class="headerlink" title="mybatis返回列表"></a>mybatis返回列表</h2><p>mybatis不支持返回列表类型的返回值，需要自己写映射<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;resultMap id=&quot;departMent&quot; type=&quot;Department&quot;&gt;</div><div class="line">    &lt;id column=&quot;dp_id&quot; property=&quot;dp_id&quot; /&gt;</div><div class="line">    &lt;result column=&quot;dp_name&quot; property=&quot;dp_name&quot; /&gt;</div><div class="line">    &lt;result column=&quot;cost_center&quot; property=&quot;cost_center&quot; /&gt;</div><div class="line">&lt;/resultMap&gt;</div></pre></td></tr></table></figure></p>
<p>然后在select标签中设置resultMap为自定义的类型的id</p>
<h2 id="输入日志"><a href="#输入日志" class="headerlink" title="输入日志"></a>输入日志</h2><p>mybatis使用了slf4j，依次查找<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SLF4J</div><div class="line">Apache Commons Logging</div><div class="line">Log4j 2</div><div class="line">Log4j</div><div class="line">JDK logging</div></pre></td></tr></table></figure></p>
<p>如果都没找到，则不显示日志</p>
<h2 id="OGNL"><a href="#OGNL" class="headerlink" title="OGNL"></a>OGNL</h2><p>mybatis支持OGNL，具体去查资料。<br>使用<code>${}</code>或<code>#{}</code>来获得数据，后者可以方式sql注入。但是貌似不支持运算<br>前者需要get方法，后者支持自动转换。</p>
</properties>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/mybatis/" data-id="cj1soul4h0008fcuiy75o5nqw" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jrebel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/jrebel/" class="article-date">
  <time datetime="2017-04-21T14:41:30.858Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>建议从intellij直接安装插件。</p>
<p>激活的话由两个服务器地址，<br>idea.qinxi1992.cn/{username}<br>idea.goxz.gq/{username}<br>邮箱随意<br>如果已经离线激活，可通过执行<br>java -jar jrebel.jar -delete-offline<br>来解除离线激活状态</p>
<p>要在view里打开jrebel pabel，然后选中要监控的项目<br>将update设置为reload resource and classes，</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/jrebel/" data-id="cj1soul3u0001fcuix5ti9w18" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-使用hexo搭建博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/16/使用hexo搭建博客/" class="article-date">
  <time datetime="2017-04-16T13:07:53.000Z" itemprop="datePublished">2017-04-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/16/使用hexo搭建博客/">使用hexo搭建博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install git</div><div class="line">git config --global user.name &quot;omsfuk&quot;</div><div class="line">git config --golbal user.email &quot;omsfuk@163.com&quot;</div><div class="line">生成密钥</div><div class="line">ssh-keygen -t rsa -C &quot;omsfuk@163.com&quot;</div><div class="line">将id_rsa.pub文件里的内容设置到github中</div></pre></td></tr></table></figure>
<h1 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget  http://nodejs.org/dist/v4.5.0/node-v4.5.0-linux-x64.tar.xz</div><div class="line">tar -vxf node-v4.5.0-linux-x64.tar.xz</div></pre></td></tr></table></figure>
<p>然后将文件复制过去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo cp -r bin/* /usr/local/bin/</div><div class="line">sudo cp -r lib/* /usr/local/lib/</div><div class="line">sudo cp -r include/* /usr/local/include/</div></pre></td></tr></table></figure></p>
<p>查看node版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure></p>
<h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install npm</div></pre></td></tr></table></figure>
<h1 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure>
<h1 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">hexo new [layout] &lt;title&gt;</div><div class="line">生成的文件会在source/_post/目录下，直接编辑就好</div><div class="line">hexo clean 清理缓存，当经常更换主题或发表文章时使用</div><div class="line">hexo g 生成静态网页</div><div class="line">hexo d 部署</div><div class="line">hexo s 启动服务器</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/16/使用hexo搭建博客/" data-id="cj1soul410004fcuiu70so96n" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/22/wps/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/22/bcloud/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/22/qq/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/21/hexo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/21/ubuntu/">ubuntu初始化&amp;&amp;美化</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>