---------------------------
title: 复用类
tags: ThinkInJava
---------------------------
[TOC]

复用类的方法有两种：组合、继承和代理。继承是面向对象程序设计的基石之一
## 组合
只需要将对象引用置于新类中即可。组合主要指的是局部变量。

## 继承
当创建一个类时，总是在继承。因此，除非已明确指出要从其他类中继承，否则就是在隐式的从Object类继承。
想要调用被覆盖的方法，可以用`super`关键字。

#### 初始化基类
继承并不是复制基类的接口，当创建了一个导出类的对象时，该对象包含了一个基类的子对象。
构建过程是”向外扩散"的，先初始化基类。
当子类中含有默认构造器或自定义的不含参数的构造器时，编译器会自动帮你调用基类的构造器。但是，如果没有默认的基类构造器，或者想调用一个带参数的基类构造器，就必须用关键字`super`显式的调用基类构造器。且`super`必须要在子类构造器的首行。

## 代理
第三种关系称为代理。Java并没有提供对它的直接支持。它的形式是成员变量。
这是继承和组合之间的中庸之道。我们将一个成员对象置于所要构造的类中（就像组合），但与此同时我们在新类中暴露了该成员对象的所有方法（就像继承）

## 结合使用组合和继承
#### 确保正确清理
```
try {
} finally {
}
```
在try块中的代码段，无论发生了什么，都会保证finally一定会被执行，因为保证了正确清理。

#### 名称屏蔽
若在C++的子类中重载父类方法，则父类所有方法都会被屏蔽。
而Java不然，父类的被重载方法依旧可以正常访问。

#### 在组合和继承之间选择
组合和继承都允许在新的类中放置子对象，组合是显式的这样做，而继承则是隐式的做。
组合技术常用于想在新类中使用现有类的功能而非它的接口的情形。

## protected关键字
就类用户而言，这是private的，但对于任何继承此类的导出类或其他任何位于同一个包内的类来说，它却是可以访问的。

## 向上转型
“为新的类提供方法”并不是继承技术中最重要的方面，其最重要的方面是用来表现新类和基类之间的关系。这种关系可以用“新类是现有类的一种类型”来概括。

#### 为什么称为向上转型
传统的类继承图的绘制：将根置于页面的顶端，然后逐渐向下。
导出类是基类的一个超集，它可能含有比基类更多的方法，但它必须至少具备基类中所含有的方法。

#### 再论组合和继承
在面向对象编程中，生成和使用程序代码最有可能采用的方法就是直接将数据和方法包装进一个类中，并使用该类的对象。也可以运用组合技术使用现有类来开发新的类，而继承技术其实是不太常用的。应当慎用这一技术。
如果必须向上转型，则继承是必要的;但如果不需要，则应当好好考虑下自己是否需要继承。

## final关键字
final可以被用在三种地方：数据、方法和类。在不同的上下文环境下，它的含义可能略有不同，但通常它指的是“这是不可改变的”
#### final数据
一个永远不变的编译时常量。
一个在运行是被初始化的值，你不希望它的值被改变。
当final修饰的不是基本类型时，它指的是引用不变。

**Java允许生成空白final，所谓空白final指的是被声明为final但又未给定初值的域。**
**无论什么情况，编译器总会确保空白final总会在使用之前被初始化。**
**可以将final域的初始化延迟到构造器，但是在这之前不能使用它，否则会编译错误**

Java允许你在参数列表中将参数声明为final。这意味着你无法在方法中更改参数引用所指向的对象。

#### final方法
使用final的原因是将方法锁定，以防任何继承类修改它的含义。
过去曾经有第二个原因：效率。但JDK1.5及以上有了改进，可以不去考虑final对效率的影响。

#### final类
表明不打算继承该类，例如String。
final类中的域可以选择是不是final的。但是final类中的方法都是隐式的指定是final，因为无法继承。


