-----------------------
title: Whoere服务端第一版
tags: Java课设
-----------------------
# Whoere服务端开发（第一版）

## 需求分析
* 记录登录的用户的信息：包括地理位置信息、用户名。
* 鉴于是一个小程序，简易起见，无需密码即可登录。
* 当用户请求时，可以返回所有人的IP地址信息。以供用户筛选、连接。

## 设计
#### 概览
* 维护一张用户信息表。包括用户名、地理坐标、ip字段。
* 采用类RESTful风格设计，提供给用户API接口。
* 为了节省服务器计算资源，且用户不多，将附近的人的信息全部发送到用户手中。用户自行计算出附近的人。
* 数据持久化，采用MySQL数据库
* 采用SpringMVC搭建服务端。稳定又不失效率。

#### API接口说明
* `get` //获得所有人得信息，以JSON形式返回
* `update/{username}/{gpsx}/{gpsy}/{ip}` //更新信息

## 实现
由于没有什么价值，所以未上传到Github中。具体代码请看附件。

## 总结
#### 缺点
* 实现的比较粗糙。例如用户下线，改名等。当然实现起来也比较简单，完全可以搞一个类似心跳包的机制，5分钟之内没有update则自动下线。
* 此服务端只是起到了一个位置共享的作用，而没有起到中转站的作用。客户端必须在同一个局域网内。否则无法直连。
* 对服务端的定位没有准确的分析到底是CPU密集型，还是IO密集型。此服务端被自己定位为IO密集型。实际上应该跟着用户需求走。如果用户需要的是自动返回附近的人的信息，那应该将运算逻辑放在服务端。
#### 优点
* SpringMVC实现的服务端比较稳定。最起码比裸的Socket稳定。
* 用户接口良好，简洁。
* 使用JSON进行数据传输，比起XML来迅速高效。当然比Socket要稍微慢一点。
